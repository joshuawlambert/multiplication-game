<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Blaster - Multiplication Game</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Menu Screen -->
        <div id="menu-screen" class="screen active">
            <div class="logo">
                <span class="math">MATH</span>
                <span class="blaster">BLASTER</span>
                <div class="stars">‚≠ê‚≠ê‚≠ê</div>
            </div>
            
            <div class="menu-buttons">
                <button class="btn btn-play" onclick="showScreen('name-screen')">
                    üöÄ PLAY GAME
                </button>
                <button class="btn btn-leaderboard" onclick="showLeaderboard()">
                    üèÜ LEADERBOARD
                </button>
                <button class="btn btn-help" onclick="showScreen('settings-screen')">
                    ‚öôÔ∏è SETTINGS
                </button>
                <button class="btn btn-help" onclick="showScreen('help-screen')">
                    ‚ùì HOW TO PLAY
                </button>
            </div>
        </div>

        <!-- Name Entry Screen -->
        <div id="name-screen" class="screen">
            <h2>üåü What's Your Name? üåü</h2>
            <input type="text" id="player-name" placeholder="Type your name..." maxlength="15">
            <div class="on-screen-keyboard" id="name-keyboard">
                <div class="kb-row">
                    <button onclick="addToName('Q')">Q</button>
                    <button onclick="addToName('W')">W</button>
                    <button onclick="addToName('E')">E</button>
                    <button onclick="addToName('R')">R</button>
                    <button onclick="addToName('T')">T</button>
                    <button onclick="addToName('Y')">Y</button>
                    <button onclick="addToName('U')">U</button>
                    <button onclick="addToName('I')">I</button>
                    <button onclick="addToName('O')">O</button>
                    <button onclick="addToName('P')">P</button>
                </div>
                <div class="kb-row">
                    <button onclick="addToName('A')">A</button>
                    <button onclick="addToName('S')">S</button>
                    <button onclick="addToName('D')">D</button>
                    <button onclick="addToName('F')">F</button>
                    <button onclick="addToName('G')">G</button>
                    <button onclick="addToName('H')">H</button>
                    <button onclick="addToName('J')">J</button>
                    <button onclick="addToName('K')">K</button>
                    <button onclick="addToName('L')">L</button>
                </div>
                <div class="kb-row">
                    <button onclick="addToName('Z')">Z</button>
                    <button onclick="addToName('X')">X</button>
                    <button onclick="addToName('C')">C</button>
                    <button onclick="addToName('V')">V</button>
                    <button onclick="addToName('B')">B</button>
                    <button onclick="addToName('N')">N</button>
                    <button onclick="addToName('M')">M</button>
                </div>
                <div class="kb-row">
                    <button class="btn-space" onclick="addToName(' ')">SPACE</button>
                    <button class="btn-backspace" onclick="backspaceName()">‚å´</button>
                </div>
            </div>
            <button class="btn btn-play" onclick="startGame()">üéÆ START!</button>
            <button class="btn btn-back" onclick="showScreen('menu-screen')">‚Üê BACK</button>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="stat">
                    <span class="stat-label">‚≠ê Score</span>
                    <span id="score" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">‚è±Ô∏è Time</span>
                    <span id="timer" class="stat-value">0:00</span>
                </div>
                <div class="stat">
                    <span class="stat-label">üî• Streak</span>
                    <span id="streak" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">‚ù§Ô∏è Lives</span>
                    <span id="lives" class="stat-value">‚ù§‚ù§‚ù§</span>
                </div>
            </div>

            <div class="mission-row">
                <div id="mission" class="mission">üéØ Mission: Get 3 correct in a row!</div>
                <div class="power">
                    <span class="power-label">‚ú® Power</span>
                    <div class="power-bar"><div id="power-fill" class="power-fill"></div></div>
                </div>
            </div>

            <div class="mascot" aria-hidden="true">
                <div id="mascot-face" class="mascot-face">üöÄ</div>
                <div id="mascot-bubble" class="mascot-bubble">Let's blast some answers!</div>
            </div>

            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>

            <div class="question-container">
                <div id="question" class="question">?</div>
                <div class="answer-box">
                    <span id="answer-display" class="answer-display">?</span>
                </div>
            </div>

            <div id="feedback" class="feedback"></div>

            <div class="input-hint mobile-hint">üëÜ Tap the buttons below</div>
            <div class="input-hint desktop-hint">‚å®Ô∏è Type on your keyboard</div>

            <div class="numpad">
                <div class="numpad-row">
                    <button class="num-btn" onclick="addDigit(1)">1</button>
                    <button class="num-btn" onclick="addDigit(2)">2</button>
                    <button class="num-btn" onclick="addDigit(3)">3</button>
                </div>
                <div class="numpad-row">
                    <button class="num-btn" onclick="addDigit(4)">4</button>
                    <button class="num-btn" onclick="addDigit(5)">5</button>
                    <button class="num-btn" onclick="addDigit(6)">6</button>
                </div>
                <div class="numpad-row">
                    <button class="num-btn" onclick="addDigit(7)">7</button>
                    <button class="num-btn" onclick="addDigit(8)">8</button>
                    <button class="num-btn" onclick="addDigit(9)">9</button>
                </div>
                <div class="numpad-row">
                    <button class="num-btn btn-clear" onclick="clearAnswer()">C</button>
                    <button class="num-btn" onclick="addDigit(0)">0</button>
                    <button class="num-btn btn-submit" onclick="submitAnswer()">‚úì</button>
                </div>
            </div>

            <button class="quit-btn" onclick="quitGame()">‚úï</button>
        </div>

        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <div id="confetti-container"></div>
            <h1 id="gameover-title">üéâ GAME OVER! üéâ</h1>
            
            <div class="final-stats">
                <div class="final-stat">
                    <span class="final-label">Final Score</span>
                    <span id="final-score" class="final-value">0</span>
                </div>
                <div class="final-stat">
                    <span class="final-label">Correct Answers</span>
                    <span id="final-correct" class="final-value">0</span>
                </div>
                <div class="final-stat">
                    <span class="final-label">Time Played</span>
                    <span id="final-time" class="final-value">0:00</span>
                </div>
                <div class="final-stat">
                    <span class="final-label">Best Streak</span>
                    <span id="final-streak" class="final-value">0</span>
                </div>
            </div>

            <div id="rank-message" class="rank-message"></div>

            <button class="btn btn-play" onclick="playAgain()">üîÑ PLAY AGAIN</button>
            <button class="btn btn-leaderboard" onclick="showLeaderboard()">üèÜ LEADERBOARD</button>
            <button class="btn btn-back" onclick="showScreen('menu-screen')">üè† MAIN MENU</button>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" class="screen">
            <h2>üèÜ HIGH SCORES üèÜ</h2>
            <div id="leaderboard-list" class="leaderboard-list"></div>
            <button class="btn btn-back" onclick="showScreen('menu-screen')">‚Üê BACK TO MENU</button>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <h2>‚öôÔ∏è SETTINGS ‚öôÔ∏è</h2>

            <div class="settings-card">
                <div class="setting">
                    <div class="setting-title">üîä Sound</div>
                    <label class="switch">
                        <input id="setting-sound" type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting">
                    <div class="setting-title">üéØ Practice Mode</div>
                    <div class="setting-desc">Mixed (random) or focus on a single times table</div>
                    <select id="setting-table" class="setting-select">
                        <option value="">Mixed (1-12)</option>
                        <option value="2">Focus: √ó2</option>
                        <option value="3">Focus: √ó3</option>
                        <option value="4">Focus: √ó4</option>
                        <option value="5">Focus: √ó5</option>
                        <option value="6">Focus: √ó6</option>
                        <option value="7">Focus: √ó7</option>
                        <option value="8">Focus: √ó8</option>
                        <option value="9">Focus: √ó9</option>
                        <option value="10">Focus: √ó10</option>
                        <option value="11">Focus: √ó11</option>
                        <option value="12">Focus: √ó12</option>
                    </select>
                </div>

                <div class="setting small">
                    <button class="btn btn-play" onclick="resetLocalScores()">üßπ Clear Local Scores</button>
                </div>
            </div>

            <button class="btn btn-back" onclick="showScreen('menu-screen')">‚Üê BACK</button>
        </div>

        <!-- Help Screen -->
        <div id="help-screen" class="screen">
            <h2>‚ùì HOW TO PLAY ‚ùì</h2>
            <div class="help-content">
                <div class="help-item">
                    <span class="help-icon">üéØ</span>
                    <p>Solve multiplication problems as fast as you can!</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">üì±</span>
                    <p><strong>Mobile:</strong> Tap the on-screen numpad buttons to enter answers.</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">üíª</span>
                    <p><strong>Computer:</strong> Type numbers on your keyboard and press Enter.</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">‚≠ê</span>
                    <p>Each correct answer gives you points. Go fast for a speed bonus!</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">üî•</span>
                    <p>Streak bonuses: 3+ = +5 | 5+ = +10 | 10+ = +20</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">‚ù§Ô∏è</span>
                    <p>You get 3 lives. A wrong answer costs a life, then you keep going!</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">‚ú®</span>
                    <p>Fill the Power bar to activate POWER MODE (double points for 5 answers)!</p>
                </div>
                <div class="help-item">
                    <span class="help-icon">üèÖ</span>
                    <p>Complete Missions for bonus points and celebrations!</p>
                </div>
            </div>
            <button class="btn btn-back" onclick="showScreen('menu-screen')">‚Üê BACK</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
